## 目标与范围
- 扫描 `public/全部奖状` 下的图片/文档，自动生成结构化数据（级别/分类/时间/颁发单位/缩略图/原图/下载）。
- 新增「大学荣誉」独立页面：响应式卡片瀑布流、懒加载、轻量动效、点击放大与下载。
- 提供批量同步脚本与一键更新命令：新增奖状只需把文件放入文件夹即可。
- 产出可部署前端代码、README 说明与性能测试报告（首屏 <2s、Lighthouse >90）。

## 现状调研结论（基于当前仓库）
- 项目为 Astro 5 + Tailwind CSS v4，页面组件化良好，适合新增独立页面与脚本工具链。 
- 奖状文件目前主要为 `.jpg`，目录结构已天然包含“校级/省级”与部分年份信息，适合用“路径+文件名解析”自动归类。

## 数据模型（结构化输出）
- 生成 `src/data/honors.generated.json`（机器生成，不手改），字段示例：
  - `id`（由相对路径 hash 生成，稳定）
  - `level`：`校级 | 省级`
  - `category`：从子目录/文件名提取（如“国家励志奖学金/优秀毕业生/校级奖状”等）
  - `time`：`yearStart/yearEnd` + `display`（从目录/文件名解析）
  - `title`：从文件名清洗得到
  - `issuer`：默认推断（校级默认“广西财经学院”，省级默认从目录映射），可覆盖
  - `original`：原文件 public 路径
  - `thumbs`：缩略图（webp/jpg）多规格路径（320/640/960）
  - `type`：image/pdf
  - `meta`：宽高/文件大小（可选）
- 同时提供 `src/data/honors.overrides.json`（可手工维护的覆盖表）：
  - 允许针对某些条目补全/纠正 `issuer/title/time/category`，避免纯自动解析的误差。

## 扫描与缩略图生成策略
- 新增脚本 `scripts/honors-sync.mjs`：
  - 递归扫描 `public/全部奖状`，识别 `.jpg/.jpeg/.png/.webp/.gif/.pdf`。
  - 解析规则：
    - `level`：路径包含 `校级` / `省级`。
    - `time`：优先从目录名（如“2021-2022学年度...”）提取，其次从文件名提取（支持 `2023-2024`、`2023=2024`、单年 `2022`）。
    - `category/title`：从父目录与文件名去噪（去掉编号、空格、多余后缀）。
    - `issuer`：
      - 校级默认“广西财经学院”。
      - 省级根据目录关键字映射（如“广西壮族自治区普通高等教育优秀大学毕业生”→“广西壮族自治区教育厅/相关单位”），无法判断则标记“待补充”，由 overrides 覆盖。
  - 缩略图：引入 `sharp` 生成多规格（320/640/960）WebP（质量约 82），输出到 `public/全部奖状/_thumbs/...`，路径结构与原图一致，便于追踪。
  - PDF：先做“可用优先”的兼容：默认生成统一的 PDF 封面占位缩略图（SVG/PNG），点击打开原 PDF 并支持下载；后续可选增强为渲染第一页（需要额外 pdf 渲染依赖）。

## 新页面与组件设计
- 新增路由：`src/pages/honors/index.astro`（标题：大学荣誉）。
- 布局与交互：
  - 瀑布流：使用 CSS Columns 的 masonry（无需重 JS），根据断点自动列数（手机 1、平板 2、桌面 3-4）。
  - 卡片：缩略图 + 标题 + 颁发单位 + 获奖时间 + 级别 badge（校级/省级）。
  - 放大查看：轻量 Lightbox（`<dialog>` 或 overlay），展示原图、下载按钮、上一张/下一张（可选）。
  - 懒加载：`loading="lazy" decoding="async"` + `content-visibility:auto`，首屏只加载可见缩略图。
  - 微动效：hover 浮起/阴影过渡 + 进入淡入；遵循 `prefers-reduced-motion`。
  - 背景：柔和校色渐变（与现有全站风格一致的 Slate + Sky/Indigo），不喧宾夺主。
- 导航入口：Header 增加“大学荣誉”链接。

## 命令与一键更新
- `package.json` 增加脚本：
  - `honors:sync`：扫描 + 生成 JSON + 生成缩略图。
  - `honors:check`：基础校验（重复 id、缺失 issuer/time 等输出报告）。
  - `honors:update`：`npm run honors:sync && npm run build`（一键更新并产物可部署）。

## README 与部署说明
- README 替换为项目实际说明：
  - 本地启动/构建/预览
  - 奖状新增流程（把文件放入 `public/全部奖状/...` → 运行 `npm run honors:update`）
  - overrides 用法（如何修正某张奖状的颁发单位/时间）
  - PDF 支持说明与限制

## 性能测试与报告交付
- 在实现完成后：
  - 生成 `reports/perf.md`：列出首屏关键策略（缩略图多规格、懒加载、columns masonry、减少 JS）与实际 Lighthouse 结果截图/数值。
  - 提供 `npm run perf`（可选）：本地启动 preview 后跑 Lighthouse（需要安装 lighthouse，或写成 `npx lighthouse ...`）。

## 交付物清单（最终会新增/修改的主要文件）
- 新增：`scripts/honors-sync.mjs`、`src/pages/honors/index.astro`、`src/data/honors.generated.json`（生成）、`src/data/honors.overrides.json`、`public/全部奖状/_thumbs/`（生成）、`reports/perf.md`。
- 修改：`package.json`（新增命令）、`src/components/Header.astro`（新增导航）、`README.md`（部署与使用说明）。

## 风险与处理方式（不影响落地）
- “颁发单位/获奖时间”仅靠图片本体难以 100% OCR 自动化：先用路径/文件名高召回推断，缺失项通过 overrides 补齐，确保页面字段完整且可控。

我将按以上方案实现：先把扫描/生成数据与缩略图链路跑通，再做 Honors 页面与交互，最后补 README 与性能报告。