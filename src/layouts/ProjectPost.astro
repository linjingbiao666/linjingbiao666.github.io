---
import type { CollectionEntry } from 'astro:content';
import BaseLayout from './BaseLayout.astro';
import FormattedDate from '../components/FormattedDate.astro';

type Props = CollectionEntry<'projects'>['data'];

const { title, description, pubDate, image, tags, repoUrl, demoUrl } = Astro.props;
---

<BaseLayout title={title} description={description} image={image}>
	<article class="mx-auto max-w-4xl">
		<div class="not-prose mb-10 rounded-3xl border border-slate-200/70 dark:border-slate-800/70 bg-white/70 dark:bg-slate-950/40 p-6 sm:p-8 shadow-sm">
			<div class="flex flex-col gap-5">
				<div class="flex items-center justify-between gap-4 text-sm text-slate-500 dark:text-slate-400">
					<a href="/projects" class="inline-flex items-center gap-2 hover:text-slate-900 dark:hover:text-white transition-colors">
						<span aria-hidden="true">←</span>
						<span>返回项目列表</span>
					</a>
					{pubDate && (
						<div class="inline-flex items-center gap-2">
							<span class="text-slate-500 dark:text-slate-500">时间</span>
							<FormattedDate date={pubDate} />
						</div>
					)}
				</div>

				<div>
					<h1 class="text-3xl sm:text-5xl font-extrabold tracking-tight text-slate-900 dark:text-white">{title}</h1>
					<p class="mt-3 text-slate-600 dark:text-slate-300 leading-relaxed">{description}</p>
				</div>

				{tags && (
					<div class="flex flex-wrap gap-2">
						{tags.map((tag: string) => (
							<span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-slate-100/80 text-slate-700 dark:bg-slate-800/70 dark:text-slate-200 border border-slate-200/60 dark:border-slate-700/60">
								{tag}
							</span>
						))}
					</div>
				)}

				{(repoUrl || demoUrl) && (
					<div class="flex flex-wrap gap-3">
						{demoUrl && (
							<a
								href={demoUrl}
								target="_blank"
								rel="noreferrer"
								class="inline-flex items-center justify-center px-5 py-2.5 bg-primary-600 text-white rounded-full font-medium hover:bg-primary-700 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500/60"
							>
								在线体验
							</a>
						)}
						{repoUrl && (
							<a
								href={repoUrl}
								target="_blank"
								rel="noreferrer"
								class="inline-flex items-center justify-center px-5 py-2.5 bg-white/70 dark:bg-slate-950/40 text-slate-900 dark:text-white border border-slate-200/70 dark:border-slate-800/70 rounded-full font-medium hover:bg-white dark:hover:bg-slate-950/60 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500/60"
							>
								源码仓库
							</a>
						)}
					</div>
				)}

				{image && (
					<div class="rounded-2xl overflow-hidden border border-slate-200/60 dark:border-slate-800/60 shadow-sm aspect-video">
						<img width={1020} height={510} src={image} alt="" class="w-full h-full object-cover" />
					</div>
				)}
			</div>
		</div>

		<div class="prose prose-lg prose-slate dark:prose-invert max-w-none prose-headings:scroll-mt-24 prose-img:rounded-2xl">
			<slot />
		</div>
	</article>
</BaseLayout>

